import React from 'react';
import { observer } from 'mobx-react';

import { IService } from '../interface';
import store from '../index.store';

interface ServiceSvgProps {
    data: IService;
    color: string;
}

@observer
class ServiceSvg extends React.Component<ServiceSvgProps> {
    render(): React.ReactNode {
        const { data, color } = this.props;
        const { id, count } = data;
        let { x, y } = data.position;
        const placement = store.servicePlacement[id];
        switch (placement) {
            case 'leftBottom':
                x -= 190;
                y += 50;
                break;
            case 'rightTop':
                x -= 250;
                y -= 100;
                break;
            default:
                x += 65;
                y += 50;
        }

        return (
            <svg width="176px" height="93px" viewBox="0 0 176 93" x={x} y={y}>
                <defs>
                    <style>
                        {`.gs-service-count{font-size:32px;font-weight:700;}.gs-service-title{font-size:14.5px;}`}
                    </style>
                </defs>
                <title>服务器</title>
                <g fill={color}>
                    <rect width="100%" height="100%" rx="12" fill="#48F6FF" fillOpacity={0.27} />
                    <text className="gs-service-count" transform="translate(80 68.35)">
                        {count}
                    </text>
                    <text className="gs-service-title" transform="translate(80 32.76)">
                        服务器
                    </text>
                    <svg width="60px" height="54px" viewBox="0 0 60 54" x={10} y={20}>
                        <path
                            d="M54.2387,39.1511 C57.9527,41.0071 59.8087,43.5741 59.8087,46.7411 C59.8087,49.9631 57.9527,52.3101 54.1847,53.7851 L23.4427,53.7851 C19.5107,51.7641 17.5997,48.9251 17.5997,45.2661 C17.5997,41.6081 18.8557,39.3701 21.3677,38.5501 C23.8797,37.7311 25.7357,37.4591 26.8827,37.7861 C27.0467,34.5091 28.3567,32.5441 30.7047,31.9431 C33.5987,31.6711 35.6737,32.1621 37.0387,33.4181 C40.9697,29.8691 44.8467,28.7761 48.6147,30.2511 C52.4917,31.7251 54.3477,34.6731 54.2387,39.1511 L54.2387,39.1511 Z M7.2797,18.1291 C6.4607,18.1291 5.8047,18.4011 5.2597,18.9481 C4.7137,19.4941 4.4397,20.2041 4.4397,20.9671 C4.4397,21.7321 4.7137,22.3871 5.2597,22.9331 C5.8047,23.4801 6.5147,23.7531 7.2797,23.7531 C8.0447,23.7531 8.6997,23.4801 9.2457,22.9331 C9.7917,22.3871 10.0637,21.6771 10.0637,20.9141 C10.0637,20.1491 9.7917,19.4941 9.2457,18.9481 C8.7537,18.4561 8.0447,18.1291 7.2797,18.1291 L7.2797,18.1291 Z M7.2797,2.7851 C6.4607,2.7851 5.8047,3.0571 5.2597,3.6041 C4.7137,4.1501 4.4397,4.8601 4.4397,5.6241 C4.4397,6.3881 4.7137,7.0441 5.2597,7.5891 C5.8047,8.1361 6.5147,8.4091 7.2797,8.4091 C8.0447,8.4091 8.6997,8.1361 9.2457,7.5891 C9.7917,7.0441 10.0637,6.3881 10.0637,5.6241 C10.0637,4.8051 9.7917,4.1501 9.2457,3.6041 C8.7537,3.1121 8.0447,2.7851 7.2797,2.7851 L7.2797,2.7851 Z M23.9337,34.4001 C21.4227,35.0551 19.1287,36.3111 17.2717,38.0591 C15.3607,39.8611 14.3787,42.0991 14.2687,44.8301 C14.1597,47.6151 15.0887,50.6181 16.9997,53.9491 L3.7297,53.9491 C2.4197,53.9491 1.5467,53.1301 1.1637,51.4371 L1.1637,32.9811 C1.1637,31.6161 2.0377,30.7421 3.7297,30.4151 L26.5007,30.4691 C25.4627,31.0701 24.5897,32.4351 23.9337,34.4001 L23.9337,34.4001 Z M3.9487,26.8651 C3.1297,26.8651 2.4737,26.5921 1.8737,26.0471 C1.3277,25.5541 1.0007,24.8441 1.0007,24.0811 L1.0007,17.9101 C1.0007,17.2001 1.2727,16.5451 1.8737,15.9991 C2.4197,15.4531 3.1297,15.1791 3.9487,15.1791 L41.4067,15.1791 C42.2257,15.1791 42.8817,15.4531 43.4817,15.9991 C44.0827,16.5451 44.3557,17.1451 44.3557,17.9101 L44.3557,24.1351 C44.3557,24.8991 44.0827,25.5541 43.4817,26.1001 C42.9357,26.6471 42.2257,26.9201 41.4067,26.9201 L3.9487,26.9201 L3.9487,26.8651 Z M3.9487,11.6851 C3.1297,11.6851 2.4737,11.4121 1.8737,10.8661 C1.3277,10.3751 1.0007,9.7191 1.0007,8.9551 L1.0007,2.7851 C1.0007,2.0201 1.2727,1.3651 1.8737,0.8191 C2.4197,0.2731 3.1297,0.0001 3.9487,0.0001 L41.4067,0.0001 C42.2257,0.0001 42.8817,0.2731 43.4817,0.8191 C44.0827,1.3651 44.3557,2.0201 44.3557,2.7851 L44.3557,9.0091 C44.3557,9.7191 44.0827,10.3751 43.4817,10.9211 C42.9357,11.4661 42.2257,11.7401 41.4067,11.7401 L3.9487,11.7401 L3.9487,11.6851 Z"
                            stroke="none"
                            strokeWidth="1"
                            fillRule="evenodd"
                        />
                    </svg>
                </g>
            </svg>
        );
    }
}

export default ServiceSvg;
